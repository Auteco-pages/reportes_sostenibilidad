import{a as k}from"./chunk-2PSR7T7J.js";import{a as D,b as v,c as N,d as A,e as w,f as R,g as V,i as M,l as G,r as U,s as B,t as q,u as P}from"./chunk-IAQZ57CQ.js";import{B as r,C as _,F as E,G as p,I as d,K as a,L as t,M as m,Q as b,R as c,S as o,U as u,W as I,a as C,b as h,c as f,da as T,fa as F,ha as x,na as y,s as S}from"./chunk-ACHKL7EZ.js";function L(n,g){if(n&1&&(a(0,"span",25),o(1),t()),n&2){let i=c();r(),u(" ",i.getErrorMessage(i.datoscontabilidadtvs,"pago_intereses_bancarios")," ")}}function $(n,g){if(n&1&&(a(0,"span",25),o(1),t()),n&2){let i=c();r(),u(" ",i.getErrorMessage(i.datoscontabilidadtvs,"impuesto_renta_pagado")," ")}}function H(n,g){if(n&1&&(a(0,"span",25),o(1),t()),n&2){let i=c();r(),u(" ",i.getErrorMessage(i.datoscontabilidadtvs,"iva_pagado")," ")}}function Y(n,g){if(n&1&&(a(0,"span",25),o(1),t()),n&2){let i=c();r(),u(" ",i.getErrorMessage(i.datoscontabilidadtvs,"ica_pagado")," ")}}function z(n,g){if(n&1&&(a(0,"span",25),o(1),t()),n&2){let i=c();r(),u(" ",i.getErrorMessage(i.datoscontabilidadtvs,"impuesto_predial_pagado")," ")}}function J(n,g){if(n&1&&(a(0,"span",25),o(1),t()),n&2){let i=c();r(),u(" ",i.getErrorMessage(i.datoscontabilidadtvs,"utilidad_perdida_neta")," ")}}var oe=(()=>{class n extends q{constructor(i,l,e,s){super(),this.formBuilder=i,this.formService=l,this.formDataService=e,this.router=s,this.contabilidadtvs=!0,this.datoscontabilidadtvs=new w({}),this.filesToUpload=new Map}ngOnInit(){this.datoscontabilidadtvs=this.formBuilder.group({pago_intereses_bancarios:["",[v.required]],impuesto_renta_pagado:["",[v.required]],iva_pagado:["",[v.required]],ica_pagado:["",[v.required]],impuesto_predial_pagado:["",[v.required]],utilidad_perdida_neta:["",[v.required]]})}onFileSelected(i,l){let e=i.target.files[0];e&&(this.filesToUpload.set(l,e),console.log(`Archivo seleccionado: ${e.name} para ${l}`))}convertFileToBase64(i){return f(this,null,function*(){return new Promise((l,e)=>{let s=new FileReader;s.onload=()=>l(s.result),s.onerror=e,s.readAsDataURL(i)})})}submitFormTvs(){return f(this,null,function*(){this.markFormGroupTouched(this.datoscontabilidadtvs),this.datoscontabilidadtvs.valid?(console.log("\u2705 Formulario Contabilidad TVS v\xE1lido"),yield this.sendAttachment()):(console.log("\u274C Formulario Contabilidad TVS inv\xE1lido"),this.scrollToFirstError(),alert("Por favor, complete todos los campos num\xE9ricos"))})}sendAttachment(){return f(this,null,function*(){let i=[];for(let[s,O]of this.filesToUpload.entries()){console.log("\u{1F4CE} Procesando archivo:",s);let j=yield this.convertFileToBase64(O);i.push({fileName:s,fileData:j})}let l=this.formDataService.getDatosIniciales(),e=h(C({},this.datoscontabilidadtvs.value),{fecha_reporte:new Date().toISOString()});console.log("\u{1F4CA} Datos a enviar:",{archivos:i.length,datosiniciales:l,datoscontabilidadtvs:e}),this.formService.upload(i,l,null,null,null,e).subscribe({next:s=>{console.log("\u2705 Datos enviados exitosamente:",s),this.formDataService.clearDatosIniciales(),this.router.navigate(["/confirmacion"])},error:s=>{console.error("\u274C Error al enviar:",s),alert("Hubo un error al enviar los datos. Por favor, intente nuevamente.")}})})}static{this.\u0275fac=function(l){return new(l||n)(_(U),_(k),_(P),_(y))}}static{this.\u0275cmp=S({type:n,selectors:[["app-contabilidad-tvs"]],standalone:!0,features:[E,I],decls:72,vars:14,consts:[[1,"form-header"],[1,"header-content"],[1,"header-text"],["src","assets/auteco-logo.png","alt","Logo Empresa",1,"logo-empresa"],["id","msform"],[1,"border-blue",3,"hidden"],[3,"ngSubmit","formGroup"],[1,"section-header"],[1,"icon"],[1,"fs-subtitle"],[1,"info-box"],[1,"subsection-header"],[1,"table-container"],[1,"gri-table"],[1,"dato-solicitado"],[1,"valor-simple"],[1,"dato-label"],["type","number","formControlName","pago_intereses_bancarios","placeholder","0",3,"ngClass"],["class","error-text",4,"ngIf"],["type","number","formControlName","impuesto_renta_pagado","placeholder","0",3,"ngClass"],["type","number","formControlName","iva_pagado","placeholder","0",3,"ngClass"],["type","number","formControlName","ica_pagado","placeholder","0",3,"ngClass"],["type","number","formControlName","impuesto_predial_pagado","placeholder","0",3,"ngClass"],["type","number","formControlName","utilidad_perdida_neta","placeholder","0",3,"ngClass"],["type","button","value","GUARDAR Y ENVIAR",1,"action-button","success",3,"click"],[1,"error-text"]],template:function(l,e){l&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),m(4,"img",3),o(5," Plataforma de Gesti\xF3n - Informe de Sostenibilidad"),t(),a(6,"p"),o(7,"Sistema de recolecci\xF3n de datos para reportes GRI"),t()()()(),a(8,"form",4)(9,"fieldset",5)(10,"form",6),b("ngSubmit",function(){return e.submitFormTvs()}),a(11,"div",7)(12,"span",8),o(13,"\u{1F4B0}"),t(),a(14,"h2"),o(15,"Estado de Resultados TVS - Valor Econ\xF3mico Directo"),t()(),a(16,"p",9),o(17," Complete la informaci\xF3n del estado de resultados correspondiente al valor econ\xF3mico directo "),t(),a(18,"div",10)(19,"strong"),o(20,"\u2139\uFE0F INSTRUCCIONES:"),t(),o(21," Ingrese los valores num\xE9ricos solicitados en cada campo. Use valores positivos para ingresos y negativos para p\xE9rdidas. "),t(),a(22,"div",11)(23,"span",8),o(24,"\u{1F4CA}"),t(),o(25," ESTADO DE RESULTADOS TVS - Contenido GRI: N/A "),t(),a(26,"div",12)(27,"table",13)(28,"thead")(29,"tr")(30,"th",14),o(31,"Dato solicitado"),t(),a(32,"th",15),o(33,"Valor"),t()()(),a(34,"tbody")(35,"tr")(36,"td",16),o(37,"Pago de intereses bancarios"),t(),a(38,"td"),m(39,"input",17),p(40,L,2,1,"span",18),t()(),a(41,"tr")(42,"td",16),o(43,"Impuesto de renta pagado"),t(),a(44,"td"),m(45,"input",19),p(46,$,2,1,"span",18),t()(),a(47,"tr")(48,"td",16),o(49,"Impuesto de valor agregado (IVA) pagado"),t(),a(50,"td"),m(51,"input",20),p(52,H,2,1,"span",18),t()(),a(53,"tr")(54,"td",16),o(55,"Impuesto de industria y comercio (ICA) pagado"),t(),a(56,"td"),m(57,"input",21),p(58,Y,2,1,"span",18),t()(),a(59,"tr")(60,"td",16),o(61,"Impuesto predial pagado"),t(),a(62,"td"),m(63,"input",22),p(64,z,2,1,"span",18),t()(),a(65,"tr")(66,"td",16),o(67,"Utilidad/p\xE9rdida neta"),t(),a(68,"td"),m(69,"input",23),p(70,J,2,1,"span",18),t()()()()(),a(71,"input",24),b("click",function(){return e.submitFormTvs()}),t()()()()),l&2&&(r(9),d("hidden",!e.contabilidadtvs),r(),d("formGroup",e.datoscontabilidadtvs),r(29),d("ngClass",e.getFieldClass(e.datoscontabilidadtvs,"pago_intereses_bancarios")),r(),d("ngIf",e.shouldShowError(e.datoscontabilidadtvs,"pago_intereses_bancarios")),r(5),d("ngClass",e.getFieldClass(e.datoscontabilidadtvs,"impuesto_renta_pagado")),r(),d("ngIf",e.shouldShowError(e.datoscontabilidadtvs,"impuesto_renta_pagado")),r(5),d("ngClass",e.getFieldClass(e.datoscontabilidadtvs,"iva_pagado")),r(),d("ngIf",e.shouldShowError(e.datoscontabilidadtvs,"iva_pagado")),r(5),d("ngClass",e.getFieldClass(e.datoscontabilidadtvs,"ica_pagado")),r(),d("ngIf",e.shouldShowError(e.datoscontabilidadtvs,"ica_pagado")),r(5),d("ngClass",e.getFieldClass(e.datoscontabilidadtvs,"impuesto_predial_pagado")),r(),d("ngIf",e.shouldShowError(e.datoscontabilidadtvs,"impuesto_predial_pagado")),r(5),d("ngClass",e.getFieldClass(e.datoscontabilidadtvs,"utilidad_perdida_neta")),r(),d("ngIf",e.shouldShowError(e.datoscontabilidadtvs,"utilidad_perdida_neta")))},dependencies:[x,T,F,B,R,D,V,N,A,M,G]})}}return n})();export{oe as ContabilidadTvsComponent};

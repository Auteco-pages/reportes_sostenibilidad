import{a as k}from"./chunk-2PSR7T7J.js";import{a as D,b as v,c as N,d as A,e as w,f as R,g as V,i as M,l as G,q as U,r as B,s as q,t as P}from"./chunk-6S4UDF73.js";import{B as r,C as _,F as E,G as p,I as d,K as t,L as i,M as m,Q as b,R as c,S as o,U as u,W as I,a as C,b as h,c as f,da as T,fa as F,ha as x,na as y,s as S}from"./chunk-ACHKL7EZ.js";function L(n,g){if(n&1&&(t(0,"span",26),o(1),i()),n&2){let a=c();r(),u(" ",a.getErrorMessage(a.datoscontabilidadtvs,"pago_intereses_bancarios")," ")}}function $(n,g){if(n&1&&(t(0,"span",26),o(1),i()),n&2){let a=c();r(),u(" ",a.getErrorMessage(a.datoscontabilidadtvs,"impuesto_renta_pagado")," ")}}function H(n,g){if(n&1&&(t(0,"span",26),o(1),i()),n&2){let a=c();r(),u(" ",a.getErrorMessage(a.datoscontabilidadtvs,"iva_pagado")," ")}}function Y(n,g){if(n&1&&(t(0,"span",26),o(1),i()),n&2){let a=c();r(),u(" ",a.getErrorMessage(a.datoscontabilidadtvs,"ica_pagado")," ")}}function z(n,g){if(n&1&&(t(0,"span",26),o(1),i()),n&2){let a=c();r(),u(" ",a.getErrorMessage(a.datoscontabilidadtvs,"impuesto_predial_pagado")," ")}}function J(n,g){if(n&1&&(t(0,"span",26),o(1),i()),n&2){let a=c();r(),u(" ",a.getErrorMessage(a.datoscontabilidadtvs,"utilidad_perdida_neta")," ")}}var oe=(()=>{class n extends q{constructor(a,l,e,s){super(),this.formBuilder=a,this.formService=l,this.formDataService=e,this.router=s,this.contabilidadtvs=!0,this.datoscontabilidadtvs=new w({}),this.filesToUpload=new Map}ngOnInit(){this.datoscontabilidadtvs=this.formBuilder.group({pago_intereses_bancarios:["",[v.required]],impuesto_renta_pagado:["",[v.required]],iva_pagado:["",[v.required]],ica_pagado:["",[v.required]],impuesto_predial_pagado:["",[v.required]],utilidad_perdida_neta:["",[v.required]]})}onFileSelected(a,l){let e=a.target.files[0];e&&(this.filesToUpload.set(l,e),console.log(`Archivo seleccionado: ${e.name} para ${l}`))}convertFileToBase64(a){return f(this,null,function*(){return new Promise((l,e)=>{let s=new FileReader;s.onload=()=>l(s.result),s.onerror=e,s.readAsDataURL(a)})})}submitFormTvs(){return f(this,null,function*(){this.markFormGroupTouched(this.datoscontabilidadtvs),this.datoscontabilidadtvs.valid?(console.log("\u2705 Formulario Contabilidad TVS v\xE1lido"),yield this.sendAttachment()):(console.log("\u274C Formulario Contabilidad TVS inv\xE1lido"),this.scrollToFirstError(),alert("Por favor, complete todos los campos num\xE9ricos"))})}sendAttachment(){return f(this,null,function*(){let a=[];for(let[s,O]of this.filesToUpload.entries()){console.log("\u{1F4CE} Procesando archivo:",s);let j=yield this.convertFileToBase64(O);a.push({fileName:s,fileData:j})}let l=this.formDataService.getDatosIniciales(),e=h(C({},this.datoscontabilidadtvs.value),{fecha_reporte:new Date().toISOString()});console.log("\u{1F4CA} Datos a enviar:",{archivos:a.length,datosiniciales:l,datoscontabilidadtvs:e}),this.formService.upload(a,l,null,null,null,e).subscribe({next:s=>{console.log("\u2705 Datos enviados exitosamente:",s),this.formDataService.clearDatosIniciales(),this.router.navigate(["/confirmacion"])},error:s=>{console.error("\u274C Error al enviar:",s),alert("Hubo un error al enviar los datos. Por favor, intente nuevamente.")}})})}static{this.\u0275fac=function(l){return new(l||n)(_(U),_(k),_(P),_(y))}}static{this.\u0275cmp=S({type:n,selectors:[["app-contabilidad-tvs"]],standalone:!0,features:[E,I],decls:73,vars:14,consts:[[1,"form-header"],[1,"header-content"],["src","assets/logo.png","alt","Logo Empresa",1,"logo-empresa"],[1,"header-text"],["id","progressbar"],["id","msform"],[1,"border-blue",3,"hidden"],[3,"ngSubmit","formGroup"],[1,"section-header"],[1,"icon"],[1,"fs-subtitle"],[1,"info-box"],[1,"subsection-header"],[1,"table-container"],[1,"gri-table"],[1,"dato-solicitado"],[1,"valor-simple"],[1,"dato-label"],["type","number","formControlName","pago_intereses_bancarios","placeholder","0",3,"ngClass"],["class","error-text",4,"ngIf"],["type","number","formControlName","impuesto_renta_pagado","placeholder","0",3,"ngClass"],["type","number","formControlName","iva_pagado","placeholder","0",3,"ngClass"],["type","number","formControlName","ica_pagado","placeholder","0",3,"ngClass"],["type","number","formControlName","impuesto_predial_pagado","placeholder","0",3,"ngClass"],["type","number","formControlName","utilidad_perdida_neta","placeholder","0",3,"ngClass"],["type","button","value","GUARDAR Y ENVIAR",1,"action-button","success",3,"click"],[1,"error-text"]],template:function(l,e){l&1&&(t(0,"div",0)(1,"div",1),m(2,"img",2),t(3,"div",3)(4,"h1"),o(5,"Plataforma de Gesti\xF3n - Informe de Sostenibilidad"),i(),t(6,"p"),o(7,"Sistema de recolecci\xF3n de datos para reportes GRI"),i()()()(),m(8,"div",4),t(9,"form",5)(10,"fieldset",6)(11,"form",7),b("ngSubmit",function(){return e.submitFormTvs()}),t(12,"div",8)(13,"span",9),o(14,"\u{1F4B0}"),i(),t(15,"h2"),o(16,"Estado de Resultados TVS - Valor Econ\xF3mico Directo"),i()(),t(17,"p",10),o(18," Complete la informaci\xF3n del estado de resultados correspondiente al valor econ\xF3mico directo "),i(),t(19,"div",11)(20,"strong"),o(21,"\u2139\uFE0F INSTRUCCIONES:"),i(),o(22," Ingrese los valores num\xE9ricos solicitados en cada campo. Use valores positivos para ingresos y negativos para p\xE9rdidas. "),i(),t(23,"div",12)(24,"span",9),o(25,"\u{1F4CA}"),i(),o(26," ESTADO DE RESULTADOS TVS - Contenido GRI: N/A "),i(),t(27,"div",13)(28,"table",14)(29,"thead")(30,"tr")(31,"th",15),o(32,"Dato solicitado"),i(),t(33,"th",16),o(34,"Valor"),i()()(),t(35,"tbody")(36,"tr")(37,"td",17),o(38,"Pago de intereses bancarios"),i(),t(39,"td"),m(40,"input",18),p(41,L,2,1,"span",19),i()(),t(42,"tr")(43,"td",17),o(44,"Impuesto de renta pagado"),i(),t(45,"td"),m(46,"input",20),p(47,$,2,1,"span",19),i()(),t(48,"tr")(49,"td",17),o(50,"Impuesto de valor agregado (IVA) pagado"),i(),t(51,"td"),m(52,"input",21),p(53,H,2,1,"span",19),i()(),t(54,"tr")(55,"td",17),o(56,"Impuesto de industria y comercio (ICA) pagado"),i(),t(57,"td"),m(58,"input",22),p(59,Y,2,1,"span",19),i()(),t(60,"tr")(61,"td",17),o(62,"Impuesto predial pagado"),i(),t(63,"td"),m(64,"input",23),p(65,z,2,1,"span",19),i()(),t(66,"tr")(67,"td",17),o(68,"Utilidad/p\xE9rdida neta"),i(),t(69,"td"),m(70,"input",24),p(71,J,2,1,"span",19),i()()()()(),t(72,"input",25),b("click",function(){return e.submitFormTvs()}),i()()()()),l&2&&(r(10),d("hidden",!e.contabilidadtvs),r(),d("formGroup",e.datoscontabilidadtvs),r(29),d("ngClass",e.getFieldClass(e.datoscontabilidadtvs,"pago_intereses_bancarios")),r(),d("ngIf",e.shouldShowError(e.datoscontabilidadtvs,"pago_intereses_bancarios")),r(5),d("ngClass",e.getFieldClass(e.datoscontabilidadtvs,"impuesto_renta_pagado")),r(),d("ngIf",e.shouldShowError(e.datoscontabilidadtvs,"impuesto_renta_pagado")),r(5),d("ngClass",e.getFieldClass(e.datoscontabilidadtvs,"iva_pagado")),r(),d("ngIf",e.shouldShowError(e.datoscontabilidadtvs,"iva_pagado")),r(5),d("ngClass",e.getFieldClass(e.datoscontabilidadtvs,"ica_pagado")),r(),d("ngIf",e.shouldShowError(e.datoscontabilidadtvs,"ica_pagado")),r(5),d("ngClass",e.getFieldClass(e.datoscontabilidadtvs,"impuesto_predial_pagado")),r(),d("ngIf",e.shouldShowError(e.datoscontabilidadtvs,"impuesto_predial_pagado")),r(5),d("ngClass",e.getFieldClass(e.datoscontabilidadtvs,"utilidad_perdida_neta")),r(),d("ngIf",e.shouldShowError(e.datoscontabilidadtvs,"utilidad_perdida_neta")))},dependencies:[x,T,F,B,R,D,V,N,A,M,G]})}}return n})();export{oe as ContabilidadTvsComponent};

import{a as B}from"./chunk-24KBMFR6.js";import{a as w}from"./chunk-2PSR7T7J.js";import{a as D,b as a,c as I,d as G,e as j,f as N,g as M,i as x,l as T,p as A,q,r as R,s as H,t as V}from"./chunk-6S4UDF73.js";import{B as n,C as c,F as y,I as s,K as t,L as e,M as d,Q as C,S as o,T as p,W as S,a as E,b as g,c as v,da as f,ha as F,na as _,s as b}from"./chunk-ACHKL7EZ.js";var W=(()=>{class h extends H{constructor(m,r,i,l,u){super(),this.formBuilder=m,this.formService=r,this.formDataService=i,this.calculadora=l,this.router=u,this.gobiernocorporativo=!0,this.datosgobiernocorporativo=new j({}),this.filesToUpload=new Map,this.totalMujeres=0,this.totalHombres=0,this.totalIndependientes=0,this.totalDependientes=0,this.totalGeneral=0,this.totalMenores30=0,this.totalEntre30y50=0,this.totalMayores50=0,this.totalIndependientesEdad=0,this.totalDependientesEdad=0,this.totalGeneralEdad=0,this.totalMujeresComite=0,this.totalHombresComite=0,this.totalGeneralComite=0,this.totalMenores30Comite=0,this.totalEntre30y50Comite=0,this.totalMayores50Comite=0,this.totalGeneralEdadComite=0}ngOnInit(){this.datosgobiernocorporativo=this.formBuilder.group({mujeres_independientes:[0,[a.required,a.min(0)]],mujeres_dependientes:[0,[a.required,a.min(0)]],hombres_independientes:[0,[a.required,a.min(0)]],hombres_dependientes:[0,[a.required,a.min(0)]],menores30_independientes:[0,[a.required,a.min(0)]],menores30_dependientes:[0,[a.required,a.min(0)]],entre30y50_independientes:[0,[a.required,a.min(0)]],entre30y50_dependientes:[0,[a.required,a.min(0)]],mayores50_independientes:[0,[a.required,a.min(0)]],mayores50_dependientes:[0,[a.required,a.min(0)]],mujeres_comite:[0,[a.required,a.min(0)]],hombres_comite:[0,[a.required,a.min(0)]],menores30_comite:[0,[a.required,a.min(0)]],entre30y50_comite:[0,[a.required,a.min(0)]],mayores50_comite:[0,[a.required,a.min(0)]]}),this.calcularTotales(),this.datosgobiernocorporativo.valueChanges.subscribe(()=>{this.calcularTotales()})}calcularTotales(){let m=this.datosgobiernocorporativo.value,r=this.calculadora.calcularTotalesJuntaGenero(m);this.totalMujeres=r.totalMujeres,this.totalHombres=r.totalHombres,this.totalIndependientes=r.totalIndependientes,this.totalDependientes=r.totalDependientes,this.totalGeneral=r.totalGeneral;let i=this.calculadora.calcularTotalesJuntaEdad(m);this.totalMenores30=i.totalMenores30,this.totalEntre30y50=i.totalEntre30y50,this.totalMayores50=i.totalMayores50,this.totalIndependientesEdad=i.totalIndependientesEdad,this.totalDependientesEdad=i.totalDependientesEdad,this.totalGeneralEdad=i.totalGeneralEdad;let l=this.calculadora.calcularTotalesComiteGenero(m);this.totalMujeresComite=l.totalMujeresComite,this.totalHombresComite=l.totalHombresComite,this.totalGeneralComite=l.totalGeneralComite;let u=this.calculadora.calcularTotalesComiteEdad(m);this.totalMenores30Comite=u.totalMenores30Comite,this.totalEntre30y50Comite=u.totalEntre30y50Comite,this.totalMayores50Comite=u.totalMayores50Comite,this.totalGeneralEdadComite=u.totalGeneralEdadComite}onFileSelected(m,r){let i=m.target.files[0];i&&(this.filesToUpload.set(r,i),console.log(`Archivo seleccionado: ${i.name} para ${r}`))}convertFileToBase64(m){return v(this,null,function*(){return new Promise((r,i)=>{let l=new FileReader;l.onload=()=>r(l.result),l.onerror=i,l.readAsDataURL(m)})})}submitForm2(){return v(this,null,function*(){this.markFormGroupTouched(this.datosgobiernocorporativo),this.datosgobiernocorporativo.valid?(console.log("\u2705 Formulario Gobierno Corporativo v\xE1lido"),yield this.sendAttachment()):(console.log("\u274C Formulario 2 inv\xE1lido"),this.scrollToFirstError(),alert("Por favor, complete todos los campos num\xE9ricos"))})}sendAttachment(){return v(this,null,function*(){let m=[];for(let[l,u]of this.filesToUpload.entries()){console.log("\u{1F4CE} Procesando archivo:",l);let U=yield this.convertFileToBase64(u);m.push({fileName:l,fileData:U})}let r=this.formDataService.getDatosIniciales(),i=g(E({},this.datosgobiernocorporativo.value),{totales:{junta_genero:{mujeres:this.totalMujeres,hombres:this.totalHombres,independientes:this.totalIndependientes,dependientes:this.totalDependientes,general:this.totalGeneral},junta_edad:{menores30:this.totalMenores30,entre30y50:this.totalEntre30y50,mayores50:this.totalMayores50,independientes:this.totalIndependientesEdad,dependientes:this.totalDependientesEdad,general:this.totalGeneralEdad},comite_genero:{mujeres:this.totalMujeresComite,hombres:this.totalHombresComite,general:this.totalGeneralComite},comite_edad:{menores30:this.totalMenores30Comite,entre30y50:this.totalEntre30y50Comite,mayores50:this.totalMayores50Comite,general:this.totalGeneralEdadComite}}});console.log("\u{1F4CA} Datos a enviar:",{archivos:m.length,datosiniciales:r,datosgobiernocorporativo:i}),this.formService.upload(m,r,i,null,null).subscribe({next:l=>{console.log("\u2705 Datos enviados exitosamente:",l),this.formDataService.clearDatosIniciales(),this.router.navigate(["/confirmacion"])},error:l=>{console.error("\u274C Error al enviar:",l),alert("Hubo un error al enviar los datos. Por favor, intente nuevamente.")}})})}static{this.\u0275fac=function(r){return new(r||h)(c(q),c(w),c(V),c(B),c(_))}}static{this.\u0275cmp=b({type:h,selectors:[["app-gobierno-corporativo"]],standalone:!0,features:[y,S],decls:198,vars:30,consts:[[1,"form-header"],["src","assets/auteco-logo.png","alt","Logo Empresa",1,"logo-empresa"],[1,"icon"],["id","msform"],[1,"border-blue",3,"hidden"],[3,"ngSubmit","formGroup"],[1,"section-header"],[1,"fs-subtitle"],[1,"info-box"],[1,"subsection-header"],[1,"table-container"],[1,"gri-table"],[1,"dato-solicitado"],[1,"independientes"],[1,"dependientes"],[1,"valor"],[1,"dato-label"],["type","number","formControlName","mujeres_independientes","min","0","placeholder","0",3,"ngClass"],["type","number","formControlName","mujeres_dependientes","min","0","placeholder","0",3,"ngClass"],[1,"valor-calculado"],[1,"resultado"],["type","number","formControlName","hombres_independientes","min","0","placeholder","0",3,"ngClass"],["type","number","formControlName","hombres_dependientes","min","0","placeholder","0",3,"ngClass"],[1,"totales-row"],[1,"total-cell"],[1,"resultado-total"],[1,"resultado-total-final"],["type","number","formControlName","menores30_independientes","min","0","placeholder","0",3,"ngClass"],["type","number","formControlName","menores30_dependientes","min","0","placeholder","0",3,"ngClass"],["type","number","formControlName","entre30y50_independientes","min","0","placeholder","0",3,"ngClass"],["type","number","formControlName","entre30y50_dependientes","min","0","placeholder","0",3,"ngClass"],["type","number","formControlName","mayores50_independientes","min","0","placeholder","0",3,"ngClass"],["type","number","formControlName","mayores50_dependientes","min","0","placeholder","0",3,"ngClass"],[1,"gri-table","comite-table"],[1,"valor-simple"],["type","number","formControlName","mujeres_comite","min","0","placeholder","0",3,"ngClass"],["type","number","formControlName","hombres_comite","min","0","placeholder","0",3,"ngClass"],["type","number","formControlName","menores30_comite","min","0","placeholder","0",3,"ngClass"],["type","number","formControlName","entre30y50_comite","min","0","placeholder","0",3,"ngClass"],["type","number","formControlName","mayores50_comite","min","0","placeholder","0",3,"ngClass"],["type","button","value","GUARDAR Y ENVIAR",1,"action-button","success",3,"click"]],template:function(r,i){r&1&&(t(0,"div",0)(1,"h1"),d(2,"img",1),t(3,"span",2),o(4,"\u{1F4CA}"),e(),o(5," Plataforma de Gesti\xF3n - Informe de Sostenibilidad "),e(),t(6,"p"),o(7,"Sistema de recolecci\xF3n de datos para reportes GRI"),e()(),t(8,"form",3)(9,"fieldset",4)(10,"form",5),C("ngSubmit",function(){return i.submitForm2()}),t(11,"div",6)(12,"span",2),o(13,"\u{1F4CA}"),e(),t(14,"h2"),o(15,"Composici\xF3n de los \xD3rganos de Gobierno - Reportes GRI"),e()(),t(16,"p",7),o(17," Complete la informaci\xF3n de diversidad de la junta directiva y comit\xE9 directivo "),e(),t(18,"div",8)(19,"strong"),o(20,"\u2139\uFE0F INSTRUCCIONES:"),e(),o(21," Ingrese los valores num\xE9ricos en cada tabla. Los totales se calcular\xE1n autom\xE1ticamente. "),e(),t(22,"div",9)(23,"span",2),o(24,"\u{1F465}"),e(),o(25," GRI 2-23, 405-1: Diversidad de la junta directiva por g\xE9nero y tipo de miembro "),e(),t(26,"div",10)(27,"table",11)(28,"thead")(29,"tr")(30,"th",12),o(31,"Dato solicitado"),e(),t(32,"th",13),o(33,"Independientes"),e(),t(34,"th",14),o(35,"Dependientes"),e(),t(36,"th",15),o(37,"Valor"),e()()(),t(38,"tbody")(39,"tr")(40,"td",16),o(41,"N\xFAmero de mujeres que hacen parte de la junta directiva"),e(),t(42,"td"),d(43,"input",17),e(),t(44,"td"),d(45,"input",18),e(),t(46,"td",19)(47,"span",20),o(48),e()()(),t(49,"tr")(50,"td",16),o(51,"N\xFAmero de hombres que hacen parte de la junta directiva"),e(),t(52,"td"),d(53,"input",21),e(),t(54,"td"),d(55,"input",22),e(),t(56,"td",19)(57,"span",20),o(58),e()()(),t(59,"tr",23)(60,"td",16)(61,"strong"),o(62,"Totales"),e()(),t(63,"td",24)(64,"span",25),o(65),e()(),t(66,"td",24)(67,"span",25),o(68),e()(),t(69,"td",24)(70,"span",26),o(71),e()()()()()(),t(72,"div",9)(73,"span",2),o(74,"\u{1F4C5}"),e(),o(75," GRI 2-23, 405-1: Diversidad de la junta directiva por edad y tipo de miembro "),e(),t(76,"div",10)(77,"table",11)(78,"thead")(79,"tr")(80,"th",12),o(81,"Dato solicitado"),e(),t(82,"th",13),o(83,"Independientes"),e(),t(84,"th",14),o(85,"Dependientes"),e(),t(86,"th",15),o(87,"Valor"),e()()(),t(88,"tbody")(89,"tr")(90,"td",16),o(91,"N\xFAmero de miembros de la junta directiva menores de 30 a\xF1os"),e(),t(92,"td"),d(93,"input",27),e(),t(94,"td"),d(95,"input",28),e(),t(96,"td",19)(97,"span",20),o(98),e()()(),t(99,"tr")(100,"td",16),o(101,"N\xFAmero de miembros de la junta directiva con edad entre 30 a 50 a\xF1os"),e(),t(102,"td"),d(103,"input",29),e(),t(104,"td"),d(105,"input",30),e(),t(106,"td",19)(107,"span",20),o(108),e()()(),t(109,"tr")(110,"td",16),o(111,"N\xFAmero de miembros de la junta directiva mayores a 50 a\xF1os"),e(),t(112,"td"),d(113,"input",31),e(),t(114,"td"),d(115,"input",32),e(),t(116,"td",19)(117,"span",20),o(118),e()()(),t(119,"tr",23)(120,"td",16)(121,"strong"),o(122,"Totales"),e()(),t(123,"td",24)(124,"span",25),o(125),e()(),t(126,"td",24)(127,"span",25),o(128),e()(),t(129,"td",24)(130,"span",26),o(131),e()()()()()(),t(132,"div",9)(133,"span",2),o(134,"\u{1F454}"),e(),o(135," GRI 405-1: Diversidad del comit\xE9 directivo por g\xE9nero "),e(),t(136,"div",10)(137,"table",33)(138,"thead")(139,"tr")(140,"th",12),o(141,"Dato solicitado"),e(),t(142,"th",34),o(143,"Valor"),e()()(),t(144,"tbody")(145,"tr")(146,"td",16),o(147,"N\xFAmero de mujeres que hacen parte del comit\xE9 directivo"),e(),t(148,"td"),d(149,"input",35),e()(),t(150,"tr")(151,"td",16),o(152,"N\xFAmero de hombres que hacen parte del comit\xE9 directivo"),e(),t(153,"td"),d(154,"input",36),e()(),t(155,"tr",23)(156,"td",16)(157,"strong"),o(158,"Totales"),e()(),t(159,"td",24)(160,"span",26),o(161),e()()()()()(),t(162,"div",9)(163,"span",2),o(164,"\u{1F382}"),e(),o(165," GRI 2-23, 405-1: Diversidad del comit\xE9 directivo por edad "),e(),t(166,"div",10)(167,"table",33)(168,"thead")(169,"tr")(170,"th",12),o(171,"Dato solicitado"),e(),t(172,"th",34),o(173,"Valor"),e()()(),t(174,"tbody")(175,"tr")(176,"td",16),o(177,"N\xFAmero de miembros del comit\xE9 directivo menores de 30 a\xF1os"),e(),t(178,"td"),d(179,"input",37),e()(),t(180,"tr")(181,"td",16),o(182,"N\xFAmero de miembros del comit\xE9 directivo con edad entre 30 a 50 a\xF1os"),e(),t(183,"td"),d(184,"input",38),e()(),t(185,"tr")(186,"td",16),o(187,"N\xFAmero de miembros del comit\xE9 directivo mayores a 50 a\xF1os"),e(),t(188,"td"),d(189,"input",39),e()(),t(190,"tr",23)(191,"td",16)(192,"strong"),o(193,"Totales"),e()(),t(194,"td",24)(195,"span",26),o(196),e()()()()()(),t(197,"input",40),C("click",function(){return i.submitForm2()}),e()()()()),r&2&&(n(9),s("hidden",!i.gobiernocorporativo),n(),s("formGroup",i.datosgobiernocorporativo),n(33),s("ngClass",i.getFieldClass(i.datosgobiernocorporativo,"mujeres_independientes")),n(2),s("ngClass",i.getFieldClass(i.datosgobiernocorporativo,"mujeres_dependientes")),n(3),p(i.totalMujeres),n(5),s("ngClass",i.getFieldClass(i.datosgobiernocorporativo,"hombres_independientes")),n(2),s("ngClass",i.getFieldClass(i.datosgobiernocorporativo,"hombres_dependientes")),n(3),p(i.totalHombres),n(7),p(i.totalIndependientes),n(3),p(i.totalDependientes),n(3),p(i.totalGeneral),n(22),s("ngClass",i.getFieldClass(i.datosgobiernocorporativo,"menores30_independientes")),n(2),s("ngClass",i.getFieldClass(i.datosgobiernocorporativo,"menores30_dependientes")),n(3),p(i.totalMenores30),n(5),s("ngClass",i.getFieldClass(i.datosgobiernocorporativo,"entre30y50_independientes")),n(2),s("ngClass",i.getFieldClass(i.datosgobiernocorporativo,"entre30y50_dependientes")),n(3),p(i.totalEntre30y50),n(5),s("ngClass",i.getFieldClass(i.datosgobiernocorporativo,"mayores50_independientes")),n(2),s("ngClass",i.getFieldClass(i.datosgobiernocorporativo,"mayores50_dependientes")),n(3),p(i.totalMayores50),n(7),p(i.totalIndependientesEdad),n(3),p(i.totalDependientesEdad),n(3),p(i.totalGeneralEdad),n(18),s("ngClass",i.getFieldClass(i.datosgobiernocorporativo,"mujeres_comite")),n(5),s("ngClass",i.getFieldClass(i.datosgobiernocorporativo,"hombres_comite")),n(7),p(i.totalGeneralComite),n(18),s("ngClass",i.getFieldClass(i.datosgobiernocorporativo,"menores30_comite")),n(5),s("ngClass",i.getFieldClass(i.datosgobiernocorporativo,"entre30y50_comite")),n(5),s("ngClass",i.getFieldClass(i.datosgobiernocorporativo,"mayores50_comite")),n(7),p(i.totalGeneralEdadComite))},dependencies:[F,f,R,N,D,M,I,G,A,x,T]})}}return h})();export{W as GobiernoCorporativoComponent};

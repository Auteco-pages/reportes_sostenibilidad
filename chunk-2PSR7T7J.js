import{g as c,ia as v,j as d,ja as g,k as u,l as p,o as m,r as f}from"./chunk-ACHKL7EZ.js";var K=(()=>{class e{constructor(o){this.http=o,this.baseUrl="https://ed34f682175debf6b971a8edee7c30.e6.environment.api.powerplatform.com:443/powerautomate/automations/direct/workflows/41ec9c42f30f4262bb2f74b362b9b591/triggers/manual/paths/invoke?api-version=1&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=guVgi5u7HuJij69VcKxH2MJCclF6OZ7aut4ONk4xh8Y"}upload(o,t,s,a,r,i=null,l=null,h=null,b=null,w=null,y=null,E=null,F=null,S=null,j=null,H=null,M=null,O=null,$=null,k=null,x=null,z=null,C=null,I=null,J=null){let n={files:o,datosiniciales:t,datosgobiernocorporativo:s,datosanticorrupcion:a,datoseticatransparencia:r,datoscontabilidadtvs:i,datoscontabilidadvictory:l,datoslogistica:h,datosempleados:b,datosbienestar:w,datosdiversidadinclusion:y,datossst:E,datosdesarrollotalento:F,datosmovilidadsegura:S,datosdesarrollocomunitario:j,datosvoluntariadocorporativo:H,datoscomercialblue:M,datoscomerciavictory:O,datoscomercialtvs:$,datosdesarrolloproducto:k,datoscambioclimatico:x,datoseconomiacircular:z,datoseficienciaenergetica:C,datoseficienciaagua:I,datoscalidadaire:J,metadata:{fecha_envio:new Date().toISOString(),version:"1.0"}},B=new v({"Content-Type":"application/json"});return console.log("\u{1F4E4} Payload enviado:",JSON.stringify(n,null,2)),this.http.post(this.baseUrl,n,{headers:B}).pipe(u(2),p(D=>{console.log("\u2705 Respuesta de Power Automate:",D)}),d(this.handleError))}handleError(o){let t="Ocurri\xF3 un error al enviar los datos";return o.error instanceof ErrorEvent?t=`Error: ${o.error.message}`:t=`C\xF3digo de error: ${o.status}
Mensaje: ${o.message}`,console.error("\u274C Error en FormService:",t),c(()=>new Error(t))}validateFilesSize(o,t=10){let a=o.reduce((r,i)=>{let l=i.fileData.length*3/4;return r+l},0)/(1024*1024);return a>t?(console.warn(`\u26A0\uFE0F Los archivos exceden el l\xEDmite de ${t}MB (${a.toFixed(2)}MB)`),!1):!0}static{this.\u0275fac=function(t){return new(t||e)(f(g))}}static{this.\u0275prov=m({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();export{K as a};

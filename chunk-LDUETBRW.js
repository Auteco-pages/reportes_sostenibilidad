import{a as P}from"./chunk-2PSR7T7J.js";import{a as V,b as v,c as T,d as N,e as A,f as w,g as R,i as M,l as G,q as U,r as B,s as q,t as O}from"./chunk-6S4UDF73.js";import{B as r,C as _,F as S,G as m,I as s,K as t,L as i,M as c,Q as y,R as p,S as o,U as u,W as E,a as b,b as C,c as f,da as I,fa as F,ha as x,na as D,s as h}from"./chunk-ACHKL7EZ.js";function L(n,g){if(n&1&&(t(0,"span",26),o(1),i()),n&2){let a=p();r(),u(" ",a.getErrorMessage(a.datoscontabilidadvictory,"pago_intereses_bancarios")," ")}}function Y(n,g){if(n&1&&(t(0,"span",26),o(1),i()),n&2){let a=p();r(),u(" ",a.getErrorMessage(a.datoscontabilidadvictory,"impuesto_renta_pagado")," ")}}function $(n,g){if(n&1&&(t(0,"span",26),o(1),i()),n&2){let a=p();r(),u(" ",a.getErrorMessage(a.datoscontabilidadvictory,"iva_pagado")," ")}}function H(n,g){if(n&1&&(t(0,"span",26),o(1),i()),n&2){let a=p();r(),u(" ",a.getErrorMessage(a.datoscontabilidadvictory,"ica_pagado")," ")}}function z(n,g){if(n&1&&(t(0,"span",26),o(1),i()),n&2){let a=p();r(),u(" ",a.getErrorMessage(a.datoscontabilidadvictory,"impuesto_predial_pagado")," ")}}function J(n,g){if(n&1&&(t(0,"span",26),o(1),i()),n&2){let a=p();r(),u(" ",a.getErrorMessage(a.datoscontabilidadvictory,"utilidad_perdida_neta")," ")}}var oe=(()=>{class n extends q{constructor(a,l,e,d){super(),this.formBuilder=a,this.formService=l,this.formDataService=e,this.router=d,this.contabilidadvictory=!0,this.datoscontabilidadvictory=new A({}),this.filesToUpload=new Map}ngOnInit(){this.datoscontabilidadvictory=this.formBuilder.group({pago_intereses_bancarios:["",[v.required]],impuesto_renta_pagado:["",[v.required]],iva_pagado:["",[v.required]],ica_pagado:["",[v.required]],impuesto_predial_pagado:["",[v.required]],utilidad_perdida_neta:["",v.required]})}onFileSelected(a,l){let e=a.target.files[0];e&&(this.filesToUpload.set(l,e),console.log(`Archivo seleccionado: ${e.name} para ${l}`))}convertFileToBase64(a){return f(this,null,function*(){return new Promise((l,e)=>{let d=new FileReader;d.onload=()=>l(d.result),d.onerror=e,d.readAsDataURL(a)})})}submitFormVictory(){return f(this,null,function*(){this.markFormGroupTouched(this.datoscontabilidadvictory),this.datoscontabilidadvictory.valid?(console.log("\u2705 Formulario Contabilidad Victory+ v\xE1lido"),yield this.sendAttachment()):(console.log("\u274C Formulario Contabilidad Victory+ inv\xE1lido"),this.scrollToFirstError(),alert("Por favor, complete todos los campos num\xE9ricos"))})}sendAttachment(){return f(this,null,function*(){let a=[];for(let[d,k]of this.filesToUpload.entries()){console.log("\u{1F4CE} Procesando archivo:",d);let j=yield this.convertFileToBase64(k);a.push({fileName:d,fileData:j})}let l=this.formDataService.getDatosIniciales(),e=C(b({},this.datoscontabilidadvictory.value),{fecha_reporte:new Date().toISOString()});console.log("\u{1F4CA} Datos a enviar:",{archivos:a.length,datosiniciales:l,datoscontabilidadvictory:e}),this.formService.upload(a,l,null,null,null,null,e).subscribe({next:d=>{console.log("\u2705 Datos enviados exitosamente:",d),this.formDataService.clearDatosIniciales(),this.router.navigate(["/confirmacion"])},error:d=>{console.error("\u274C Error al enviar:",d),alert("Hubo un error al enviar los datos. Por favor, intente nuevamente.")}})})}static{this.\u0275fac=function(l){return new(l||n)(_(U),_(P),_(O),_(D))}}static{this.\u0275cmp=h({type:n,selectors:[["app-contabilidad-victory"]],standalone:!0,features:[S,E],decls:73,vars:14,consts:[[1,"form-header"],[1,"header-content"],["src","assets/logo.png","alt","Logo Empresa",1,"logo-empresa"],[1,"header-text"],["id","progressbar"],["id","msform"],[1,"border-green",3,"hidden"],[3,"ngSubmit","formGroup"],[1,"section-header"],[1,"icon"],[1,"fs-subtitle"],[1,"info-box"],[1,"subsection-header"],[1,"table-container"],[1,"gri-table"],[1,"dato-solicitado"],[1,"valor-simple"],[1,"dato-label"],["type","number","formControlName","pago_intereses_bancarios","placeholder","Ingrese valor",3,"ngClass"],["class","error-text",4,"ngIf"],["type","number","formControlName","impuesto_renta_pagado","placeholder","Ingrese valor",3,"ngClass"],["type","number","formControlName","iva_pagado","placeholder","Ingrese valor",3,"ngClass"],["type","number","formControlName","ica_pagado","placeholder","Ingrese valor",3,"ngClass"],["type","number","formControlName","impuesto_predial_pagado","placeholder","Ingrese valor",3,"ngClass"],["type","number","formControlName","utilidad_perdida_neta","placeholder","Ingrese valor (positivo o negativo)",3,"ngClass"],["type","button","value","GUARDAR Y ENVIAR",1,"action-button","success",3,"click"],[1,"error-text"]],template:function(l,e){l&1&&(t(0,"div",0)(1,"div",1),c(2,"img",2),t(3,"div",3)(4,"h1"),o(5,"Plataforma de Gesti\xF3n - Informe de Sostenibilidad"),i(),t(6,"p"),o(7,"Sistema de recolecci\xF3n de datos para reportes GRI"),i()()()(),c(8,"div",4),t(9,"form",5)(10,"fieldset",6)(11,"form",7),y("ngSubmit",function(){return e.submitFormVictory()}),t(12,"div",8)(13,"span",9),o(14,"\u{1F4B0}"),i(),t(15,"h2"),o(16,"Estado de Resultados Victory+ - Valor Econ\xF3mico Directo"),i()(),t(17,"p",10),o(18," Complete la informaci\xF3n del estado de resultados correspondiente al valor econ\xF3mico directo de Victory+ "),i(),t(19,"div",11)(20,"strong"),o(21,"\u2139\uFE0F INSTRUCCIONES:"),i(),o(22," Ingrese los valores num\xE9ricos solicitados en cada campo. Use valores positivos para ingresos y negativos para p\xE9rdidas. "),i(),t(23,"div",12)(24,"span",9),o(25,"\u{1F4CA}"),i(),o(26," ESTADO DE RESULTADOS VICTORY+ - Contenido GRI: N/A "),i(),t(27,"div",13)(28,"table",14)(29,"thead")(30,"tr")(31,"th",15),o(32,"Dato solicitado"),i(),t(33,"th",16),o(34,"Valor"),i()()(),t(35,"tbody")(36,"tr")(37,"td",17),o(38,"Pago de intereses bancarios"),i(),t(39,"td"),c(40,"input",18),m(41,L,2,1,"span",19),i()(),t(42,"tr")(43,"td",17),o(44,"Impuesto de renta pagado"),i(),t(45,"td"),c(46,"input",20),m(47,Y,2,1,"span",19),i()(),t(48,"tr")(49,"td",17),o(50,"Impuesto de valor agregado (IVA) pagado"),i(),t(51,"td"),c(52,"input",21),m(53,$,2,1,"span",19),i()(),t(54,"tr")(55,"td",17),o(56,"Impuesto de industria y comercio (ICA) pagado"),i(),t(57,"td"),c(58,"input",22),m(59,H,2,1,"span",19),i()(),t(60,"tr")(61,"td",17),o(62,"Impuesto predial pagado"),i(),t(63,"td"),c(64,"input",23),m(65,z,2,1,"span",19),i()(),t(66,"tr")(67,"td",17),o(68,"Utilidad/p\xE9rdida neta"),i(),t(69,"td"),c(70,"input",24),m(71,J,2,1,"span",19),i()()()()(),t(72,"input",25),y("click",function(){return e.submitFormVictory()}),i()()()()),l&2&&(r(10),s("hidden",!e.contabilidadvictory),r(),s("formGroup",e.datoscontabilidadvictory),r(29),s("ngClass",e.getFieldClass(e.datoscontabilidadvictory,"pago_intereses_bancarios")),r(),s("ngIf",e.shouldShowError(e.datoscontabilidadvictory,"pago_intereses_bancarios")),r(5),s("ngClass",e.getFieldClass(e.datoscontabilidadvictory,"impuesto_renta_pagado")),r(),s("ngIf",e.shouldShowError(e.datoscontabilidadvictory,"impuesto_renta_pagado")),r(5),s("ngClass",e.getFieldClass(e.datoscontabilidadvictory,"iva_pagado")),r(),s("ngIf",e.shouldShowError(e.datoscontabilidadvictory,"iva_pagado")),r(5),s("ngClass",e.getFieldClass(e.datoscontabilidadvictory,"ica_pagado")),r(),s("ngIf",e.shouldShowError(e.datoscontabilidadvictory,"ica_pagado")),r(5),s("ngClass",e.getFieldClass(e.datoscontabilidadvictory,"impuesto_predial_pagado")),r(),s("ngIf",e.shouldShowError(e.datoscontabilidadvictory,"impuesto_predial_pagado")),r(5),s("ngClass",e.getFieldClass(e.datoscontabilidadvictory,"utilidad_perdida_neta")),r(),s("ngIf",e.shouldShowError(e.datoscontabilidadvictory,"utilidad_perdida_neta")))},dependencies:[x,I,F,B,w,V,R,T,N,M,G]})}}return n})();export{oe as ContabilidadVictoryComponent};

import{a as B}from"./chunk-24KBMFR6.js";import{a as w}from"./chunk-2PSR7T7J.js";import{a as D,b as a,c as I,d as G,e as j,f as N,g as M,i as x,l as T,p as A,q,r as R,s as H,t as V}from"./chunk-6S4UDF73.js";import{B as n,C as c,F as y,I as s,K as t,L as e,M as d,Q as C,S as o,T as p,W as S,a as E,b as g,c as v,da as f,ha as F,na as _,s as b}from"./chunk-ACHKL7EZ.js";var W=(()=>{class h extends H{constructor(m,r,i,l,u){super(),this.formBuilder=m,this.formService=r,this.formDataService=i,this.calculadora=l,this.router=u,this.gobiernocorporativo=!0,this.datosgobiernocorporativo=new j({}),this.filesToUpload=new Map,this.totalMujeres=0,this.totalHombres=0,this.totalIndependientes=0,this.totalDependientes=0,this.totalGeneral=0,this.totalMenores30=0,this.totalEntre30y50=0,this.totalMayores50=0,this.totalIndependientesEdad=0,this.totalDependientesEdad=0,this.totalGeneralEdad=0,this.totalMujeresComite=0,this.totalHombresComite=0,this.totalGeneralComite=0,this.totalMenores30Comite=0,this.totalEntre30y50Comite=0,this.totalMayores50Comite=0,this.totalGeneralEdadComite=0}ngOnInit(){this.datosgobiernocorporativo=this.formBuilder.group({mujeres_independientes:[0,[a.required,a.min(0)]],mujeres_dependientes:[0,[a.required,a.min(0)]],hombres_independientes:[0,[a.required,a.min(0)]],hombres_dependientes:[0,[a.required,a.min(0)]],menores30_independientes:[0,[a.required,a.min(0)]],menores30_dependientes:[0,[a.required,a.min(0)]],entre30y50_independientes:[0,[a.required,a.min(0)]],entre30y50_dependientes:[0,[a.required,a.min(0)]],mayores50_independientes:[0,[a.required,a.min(0)]],mayores50_dependientes:[0,[a.required,a.min(0)]],mujeres_comite:[0,[a.required,a.min(0)]],hombres_comite:[0,[a.required,a.min(0)]],menores30_comite:[0,[a.required,a.min(0)]],entre30y50_comite:[0,[a.required,a.min(0)]],mayores50_comite:[0,[a.required,a.min(0)]]}),this.calcularTotales(),this.datosgobiernocorporativo.valueChanges.subscribe(()=>{this.calcularTotales()})}calcularTotales(){let m=this.datosgobiernocorporativo.value,r=this.calculadora.calcularTotalesJuntaGenero(m);this.totalMujeres=r.totalMujeres,this.totalHombres=r.totalHombres,this.totalIndependientes=r.totalIndependientes,this.totalDependientes=r.totalDependientes,this.totalGeneral=r.totalGeneral;let i=this.calculadora.calcularTotalesJuntaEdad(m);this.totalMenores30=i.totalMenores30,this.totalEntre30y50=i.totalEntre30y50,this.totalMayores50=i.totalMayores50,this.totalIndependientesEdad=i.totalIndependientesEdad,this.totalDependientesEdad=i.totalDependientesEdad,this.totalGeneralEdad=i.totalGeneralEdad;let l=this.calculadora.calcularTotalesComiteGenero(m);this.totalMujeresComite=l.totalMujeresComite,this.totalHombresComite=l.totalHombresComite,this.totalGeneralComite=l.totalGeneralComite;let u=this.calculadora.calcularTotalesComiteEdad(m);this.totalMenores30Comite=u.totalMenores30Comite,this.totalEntre30y50Comite=u.totalEntre30y50Comite,this.totalMayores50Comite=u.totalMayores50Comite,this.totalGeneralEdadComite=u.totalGeneralEdadComite}onFileSelected(m,r){let i=m.target.files[0];i&&(this.filesToUpload.set(r,i),console.log(`Archivo seleccionado: ${i.name} para ${r}`))}convertFileToBase64(m){return v(this,null,function*(){return new Promise((r,i)=>{let l=new FileReader;l.onload=()=>r(l.result),l.onerror=i,l.readAsDataURL(m)})})}submitForm2(){return v(this,null,function*(){this.markFormGroupTouched(this.datosgobiernocorporativo),this.datosgobiernocorporativo.valid?(console.log("\u2705 Formulario Gobierno Corporativo v\xE1lido"),yield this.sendAttachment()):(console.log("\u274C Formulario 2 inv\xE1lido"),this.scrollToFirstError(),alert("Por favor, complete todos los campos num\xE9ricos"))})}sendAttachment(){return v(this,null,function*(){let m=[];for(let[l,u]of this.filesToUpload.entries()){console.log("\u{1F4CE} Procesando archivo:",l);let U=yield this.convertFileToBase64(u);m.push({fileName:l,fileData:U})}let r=this.formDataService.getDatosIniciales(),i=g(E({},this.datosgobiernocorporativo.value),{totales:{junta_genero:{mujeres:this.totalMujeres,hombres:this.totalHombres,independientes:this.totalIndependientes,dependientes:this.totalDependientes,general:this.totalGeneral},junta_edad:{menores30:this.totalMenores30,entre30y50:this.totalEntre30y50,mayores50:this.totalMayores50,independientes:this.totalIndependientesEdad,dependientes:this.totalDependientesEdad,general:this.totalGeneralEdad},comite_genero:{mujeres:this.totalMujeresComite,hombres:this.totalHombresComite,general:this.totalGeneralComite},comite_edad:{menores30:this.totalMenores30Comite,entre30y50:this.totalEntre30y50Comite,mayores50:this.totalMayores50Comite,general:this.totalGeneralEdadComite}}});console.log("\u{1F4CA} Datos a enviar:",{archivos:m.length,datosiniciales:r,datosgobiernocorporativo:i}),this.formService.upload(m,r,i,null,null).subscribe({next:l=>{console.log("\u2705 Datos enviados exitosamente:",l),this.formDataService.clearDatosIniciales(),this.router.navigate(["/confirmacion"])},error:l=>{console.error("\u274C Error al enviar:",l),alert("Hubo un error al enviar los datos. Por favor, intente nuevamente.")}})})}static{this.\u0275fac=function(r){return new(r||h)(c(q),c(w),c(V),c(B),c(_))}}static{this.\u0275cmp=b({type:h,selectors:[["app-gobierno-corporativo"]],standalone:!0,features:[y,S],decls:199,vars:30,consts:[[1,"form-header"],["src","assets/auteco-logo.png","alt","Logo Empresa",1,"logo-empresa"],[1,"icon"],["id","progressbar"],["id","msform"],[1,"border-blue",3,"hidden"],[3,"ngSubmit","formGroup"],[1,"section-header"],[1,"fs-subtitle"],[1,"info-box"],[1,"subsection-header"],[1,"table-container"],[1,"gri-table"],[1,"dato-solicitado"],[1,"independientes"],[1,"dependientes"],[1,"valor"],[1,"dato-label"],["type","number","formControlName","mujeres_independientes","min","0","placeholder","0",3,"ngClass"],["type","number","formControlName","mujeres_dependientes","min","0","placeholder","0",3,"ngClass"],[1,"valor-calculado"],[1,"resultado"],["type","number","formControlName","hombres_independientes","min","0","placeholder","0",3,"ngClass"],["type","number","formControlName","hombres_dependientes","min","0","placeholder","0",3,"ngClass"],[1,"totales-row"],[1,"total-cell"],[1,"resultado-total"],[1,"resultado-total-final"],["type","number","formControlName","menores30_independientes","min","0","placeholder","0",3,"ngClass"],["type","number","formControlName","menores30_dependientes","min","0","placeholder","0",3,"ngClass"],["type","number","formControlName","entre30y50_independientes","min","0","placeholder","0",3,"ngClass"],["type","number","formControlName","entre30y50_dependientes","min","0","placeholder","0",3,"ngClass"],["type","number","formControlName","mayores50_independientes","min","0","placeholder","0",3,"ngClass"],["type","number","formControlName","mayores50_dependientes","min","0","placeholder","0",3,"ngClass"],[1,"gri-table","comite-table"],[1,"valor-simple"],["type","number","formControlName","mujeres_comite","min","0","placeholder","0",3,"ngClass"],["type","number","formControlName","hombres_comite","min","0","placeholder","0",3,"ngClass"],["type","number","formControlName","menores30_comite","min","0","placeholder","0",3,"ngClass"],["type","number","formControlName","entre30y50_comite","min","0","placeholder","0",3,"ngClass"],["type","number","formControlName","mayores50_comite","min","0","placeholder","0",3,"ngClass"],["type","button","value","GUARDAR Y ENVIAR",1,"action-button","success",3,"click"]],template:function(r,i){r&1&&(t(0,"div",0)(1,"h1"),d(2,"img",1),t(3,"span",2),o(4,"\u{1F4CA}"),e(),o(5," Plataforma de Gesti\xF3n - Informe de Sostenibilidad "),e(),t(6,"p"),o(7,"Sistema de recolecci\xF3n de datos para reportes GRI"),e()(),d(8,"div",3),t(9,"form",4)(10,"fieldset",5)(11,"form",6),C("ngSubmit",function(){return i.submitForm2()}),t(12,"div",7)(13,"span",2),o(14,"\u{1F4CA}"),e(),t(15,"h2"),o(16,"Composici\xF3n de los \xD3rganos de Gobierno - Reportes GRI"),e()(),t(17,"p",8),o(18," Complete la informaci\xF3n de diversidad de la junta directiva y comit\xE9 directivo "),e(),t(19,"div",9)(20,"strong"),o(21,"\u2139\uFE0F INSTRUCCIONES:"),e(),o(22," Ingrese los valores num\xE9ricos en cada tabla. Los totales se calcular\xE1n autom\xE1ticamente. "),e(),t(23,"div",10)(24,"span",2),o(25,"\u{1F465}"),e(),o(26," GRI 2-23, 405-1: Diversidad de la junta directiva por g\xE9nero y tipo de miembro "),e(),t(27,"div",11)(28,"table",12)(29,"thead")(30,"tr")(31,"th",13),o(32,"Dato solicitado"),e(),t(33,"th",14),o(34,"Independientes"),e(),t(35,"th",15),o(36,"Dependientes"),e(),t(37,"th",16),o(38,"Valor"),e()()(),t(39,"tbody")(40,"tr")(41,"td",17),o(42,"N\xFAmero de mujeres que hacen parte de la junta directiva"),e(),t(43,"td"),d(44,"input",18),e(),t(45,"td"),d(46,"input",19),e(),t(47,"td",20)(48,"span",21),o(49),e()()(),t(50,"tr")(51,"td",17),o(52,"N\xFAmero de hombres que hacen parte de la junta directiva"),e(),t(53,"td"),d(54,"input",22),e(),t(55,"td"),d(56,"input",23),e(),t(57,"td",20)(58,"span",21),o(59),e()()(),t(60,"tr",24)(61,"td",17)(62,"strong"),o(63,"Totales"),e()(),t(64,"td",25)(65,"span",26),o(66),e()(),t(67,"td",25)(68,"span",26),o(69),e()(),t(70,"td",25)(71,"span",27),o(72),e()()()()()(),t(73,"div",10)(74,"span",2),o(75,"\u{1F4C5}"),e(),o(76," GRI 2-23, 405-1: Diversidad de la junta directiva por edad y tipo de miembro "),e(),t(77,"div",11)(78,"table",12)(79,"thead")(80,"tr")(81,"th",13),o(82,"Dato solicitado"),e(),t(83,"th",14),o(84,"Independientes"),e(),t(85,"th",15),o(86,"Dependientes"),e(),t(87,"th",16),o(88,"Valor"),e()()(),t(89,"tbody")(90,"tr")(91,"td",17),o(92,"N\xFAmero de miembros de la junta directiva menores de 30 a\xF1os"),e(),t(93,"td"),d(94,"input",28),e(),t(95,"td"),d(96,"input",29),e(),t(97,"td",20)(98,"span",21),o(99),e()()(),t(100,"tr")(101,"td",17),o(102,"N\xFAmero de miembros de la junta directiva con edad entre 30 a 50 a\xF1os"),e(),t(103,"td"),d(104,"input",30),e(),t(105,"td"),d(106,"input",31),e(),t(107,"td",20)(108,"span",21),o(109),e()()(),t(110,"tr")(111,"td",17),o(112,"N\xFAmero de miembros de la junta directiva mayores a 50 a\xF1os"),e(),t(113,"td"),d(114,"input",32),e(),t(115,"td"),d(116,"input",33),e(),t(117,"td",20)(118,"span",21),o(119),e()()(),t(120,"tr",24)(121,"td",17)(122,"strong"),o(123,"Totales"),e()(),t(124,"td",25)(125,"span",26),o(126),e()(),t(127,"td",25)(128,"span",26),o(129),e()(),t(130,"td",25)(131,"span",27),o(132),e()()()()()(),t(133,"div",10)(134,"span",2),o(135,"\u{1F454}"),e(),o(136," GRI 405-1: Diversidad del comit\xE9 directivo por g\xE9nero "),e(),t(137,"div",11)(138,"table",34)(139,"thead")(140,"tr")(141,"th",13),o(142,"Dato solicitado"),e(),t(143,"th",35),o(144,"Valor"),e()()(),t(145,"tbody")(146,"tr")(147,"td",17),o(148,"N\xFAmero de mujeres que hacen parte del comit\xE9 directivo"),e(),t(149,"td"),d(150,"input",36),e()(),t(151,"tr")(152,"td",17),o(153,"N\xFAmero de hombres que hacen parte del comit\xE9 directivo"),e(),t(154,"td"),d(155,"input",37),e()(),t(156,"tr",24)(157,"td",17)(158,"strong"),o(159,"Totales"),e()(),t(160,"td",25)(161,"span",27),o(162),e()()()()()(),t(163,"div",10)(164,"span",2),o(165,"\u{1F382}"),e(),o(166," GRI 2-23, 405-1: Diversidad del comit\xE9 directivo por edad "),e(),t(167,"div",11)(168,"table",34)(169,"thead")(170,"tr")(171,"th",13),o(172,"Dato solicitado"),e(),t(173,"th",35),o(174,"Valor"),e()()(),t(175,"tbody")(176,"tr")(177,"td",17),o(178,"N\xFAmero de miembros del comit\xE9 directivo menores de 30 a\xF1os"),e(),t(179,"td"),d(180,"input",38),e()(),t(181,"tr")(182,"td",17),o(183,"N\xFAmero de miembros del comit\xE9 directivo con edad entre 30 a 50 a\xF1os"),e(),t(184,"td"),d(185,"input",39),e()(),t(186,"tr")(187,"td",17),o(188,"N\xFAmero de miembros del comit\xE9 directivo mayores a 50 a\xF1os"),e(),t(189,"td"),d(190,"input",40),e()(),t(191,"tr",24)(192,"td",17)(193,"strong"),o(194,"Totales"),e()(),t(195,"td",25)(196,"span",27),o(197),e()()()()()(),t(198,"input",41),C("click",function(){return i.submitForm2()}),e()()()()),r&2&&(n(10),s("hidden",!i.gobiernocorporativo),n(),s("formGroup",i.datosgobiernocorporativo),n(33),s("ngClass",i.getFieldClass(i.datosgobiernocorporativo,"mujeres_independientes")),n(2),s("ngClass",i.getFieldClass(i.datosgobiernocorporativo,"mujeres_dependientes")),n(3),p(i.totalMujeres),n(5),s("ngClass",i.getFieldClass(i.datosgobiernocorporativo,"hombres_independientes")),n(2),s("ngClass",i.getFieldClass(i.datosgobiernocorporativo,"hombres_dependientes")),n(3),p(i.totalHombres),n(7),p(i.totalIndependientes),n(3),p(i.totalDependientes),n(3),p(i.totalGeneral),n(22),s("ngClass",i.getFieldClass(i.datosgobiernocorporativo,"menores30_independientes")),n(2),s("ngClass",i.getFieldClass(i.datosgobiernocorporativo,"menores30_dependientes")),n(3),p(i.totalMenores30),n(5),s("ngClass",i.getFieldClass(i.datosgobiernocorporativo,"entre30y50_independientes")),n(2),s("ngClass",i.getFieldClass(i.datosgobiernocorporativo,"entre30y50_dependientes")),n(3),p(i.totalEntre30y50),n(5),s("ngClass",i.getFieldClass(i.datosgobiernocorporativo,"mayores50_independientes")),n(2),s("ngClass",i.getFieldClass(i.datosgobiernocorporativo,"mayores50_dependientes")),n(3),p(i.totalMayores50),n(7),p(i.totalIndependientesEdad),n(3),p(i.totalDependientesEdad),n(3),p(i.totalGeneralEdad),n(18),s("ngClass",i.getFieldClass(i.datosgobiernocorporativo,"mujeres_comite")),n(5),s("ngClass",i.getFieldClass(i.datosgobiernocorporativo,"hombres_comite")),n(7),p(i.totalGeneralComite),n(18),s("ngClass",i.getFieldClass(i.datosgobiernocorporativo,"menores30_comite")),n(5),s("ngClass",i.getFieldClass(i.datosgobiernocorporativo,"entre30y50_comite")),n(5),s("ngClass",i.getFieldClass(i.datosgobiernocorporativo,"mayores50_comite")),n(7),p(i.totalGeneralEdadComite))},dependencies:[F,f,R,N,D,M,I,G,A,x,T]})}}return h})();export{W as GobiernoCorporativoComponent};
